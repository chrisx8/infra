- name: Verify system
  ansible.builtin.assert:
    that:
      - ansible_facts.os_family == 'RedHat'

- name: Load secrets
  ansible.builtin.include_vars: secrets.yml

- name: Install Cockpit
  ansible.builtin.dnf:
    name: cockpit
    state: present
- name: Remove cockpit-packagekit
  ansible.builtin.dnf:
    name: cockpit-packagekit
    state: absent

- name: Install SSL cert for Cockpit
  ansible.builtin.import_tasks: ssl_cert.yml
