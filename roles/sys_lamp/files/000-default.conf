<VirtualHost *:80>
	ServerAdmin webmaster@localhost
	DocumentRoot /var/www/html

	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined

	Alias "/nextcloud" "/var/www/nextcloud/"
	Alias "/wiki" "/var/www/bookstack/public"

	<Directory "/var/www/bookstack/public">
		Options FollowSymlinks
		AllowOverride None
		Require all granted

		RewriteEngine On
		# Redirect Trailing Slashes If Not A Folder...
		RewriteCond %{REQUEST_FILENAME} !-d
		RewriteRule ^(.*)/$ /$1 [L,R=301]
		# Handle Front Controller...
		RewriteCond %{REQUEST_FILENAME} !-d
		RewriteCond %{REQUEST_FILENAME} !-f
		RewriteRule ^ index.php [L]
	</Directory>

	<Directory "/var/www/bookstack">
	  AllowOverride None
	  Require all denied
	</Directory>

	<Directory "/var/www/nextcloud/">
		Require all granted
		AllowOverride All
		Options FollowSymLinks MultiViews

		<IfModule mod_dav.c>
			Dav off
		</IfModule>
	</Directory>
</VirtualHost>

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
