---
- name: Verify requirements
  ansible.builtin.assert:
    that:
      - ansible_facts.distribution != 'Fedora'
      - ansible_facts.os_family == 'RedHat'
      - postgres_cron_ping_url is defined

- name: Install PostgreSQL
  ansible.builtin.import_tasks: install.yml
- name: Configure PostgreSQL
  ansible.builtin.import_tasks: configure.yml
- name: Install ssl cert
  ansible.builtin.import_tasks: sslcert.yml
- name: Configure cron jobs
  ansible.builtin.import_tasks: cron.yml
