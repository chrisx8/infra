<VirtualHost *:8443>
	ServerName storage.arb.chrisx.xyz

	SSLEngine on
	SSLCertificateFile /etc/apache2/ssl/arb.chrisx.xyz/fullchain.pem
	SSLCertificateKeyFile /etc/apache2/ssl/arb.chrisx.xyz/privkey.pem
	SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1

	Header set Referrer-Policy "no-referrer"
	Header set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
	Header set X-Content-Type-Options "nosniff"
	Header set X-Frame-Options "DENY"
	Header set X-Robots-Tag "none"

	ProxyPreserveHost On
	ProxyPass "/socket" "ws://jellyfin:8096/socket"
	ProxyPassReverse "/socket" "ws://jellyfin:8096/socket"
	ProxyPass "/" "http://jellyfin:8096/"
	ProxyPassReverse "/" "http://jellyfin:8096/"
	RequestHeader set X-Forwarded-Port "8443"
	RequestHeader set X-Forwarded-Proto expr=%{REQUEST_SCHEME}

	ErrorLog /var/log/apache2/jellyfin_error.log
	CustomLog /var/log/apache2/jellyfin_access.log combined
</VirtualHost>
