container_user: podman

container_specs:
  # Jellyfin: HTTP on 127.0.0.1:8096
  - name: jellyfin
    hostname: jellyfin.{{ container_defaults.hostname }}
    image: docker.io/jellyfin/jellyfin:latest
    network: host
    volumes:
      - "{{ _container_user_info.home }}/jellyfin/cache:/cache:Z"
      - "{{ _container_user_info.home }}/jellyfin/config:/config:Z"
      - "/mnt/media:/media:z"
  # Apache: HTTPS on 0.0.0.0:8443
  - name: apache
    hostname: apache.{{ container_defaults.hostname }}
    image: ghcr.io/chrisx8/apache-openidc:latest
    network: host
    cap_add:
      - CHOWN
      - NET_BIND_SERVICE
      - SETGID
      - SETUID
    volumes:
      - "{{ _container_user_info.home }}/apache/conf.d:/etc/apache2/sites-enabled:ro,Z"
      - "{{ _container_user_info.home }}/apache/log:/var/log/apache2:Z"
      - "{{ _container_user_info.home }}/apache/ssl:/etc/apache2/ssl:ro,Z"
      - "{{ _container_user_info.home }}/apache/www:/var/www:ro,Z"
