- name: Create filebrowser user
  ansible.builtin.user:
    name: filebrowser
    password: "*"
    home: /home/_filebrowser
    create_home: true
  register: _filebrowser_user

- name: Copy config file
  ansible.builtin.copy:
    src: filebrowser.json
    dest: "{{ _filebrowser_user.home }}/filebrowser.json"
    owner: "{{ _filebrowser_user.uid }}"
    group: "{{ _filebrowser_user.group }}"
    mode: 0640

- name: Create filebrowser db
  ansible.builtin.file:
    name: "{{ _filebrowser_user.home }}/filebrowser.db"
    owner: "{{ _filebrowser_user.uid }}"
    group: "{{ _filebrowser_user.group }}"
    mode: 0640
    state: touch
- name: Create filebrowser data dir
  ansible.builtin.file:
    name: "{{ _filebrowser_user.home }}/data"
    owner: "{{ _filebrowser_user.uid }}"
    group: "{{ _filebrowser_user.group }}"
    mode: 0750
    state: directory
