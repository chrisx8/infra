- name: Create database
  mysql_db:
    name: kanboard
    state: present

- name: Generate new password for MySQL kanboard user
  set_fact:
    mysql_kanboard_password: "{{ lookup('password', '/dev/null length=64') }}"
  changed_when: no
- name: Create MySQL kanboard user
  no_log: true
  mysql_user:
    name: kanboard
    host: localhost
    password: "{{ mysql_kanboard_password }}"
    priv: 'kanboard.*:ALL'
    state: present
