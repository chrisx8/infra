[global]
    server role = standalone server
    server string = %h
    workgroup = WORKGROUP
    include = registry

    min protocol = {{ cx_samba_min_protocol }}
    allow nt4 crypto = no
    require strong key = yes

    log file = /var/log/samba/log.%m
    max log size = 1000
    logging = file

    obey pam restrictions = yes
    unix password sync = yes
    passwd program = /usr/bin/passwd %u
    pam password change = yes
    usershare allow guests = no
    map to guest = bad user

    ea support = yes
    unix extensions = no
    vfs objects = catia fruit streams_xattr
    fruit:encoding = native
    fruit:metadata = stream
    fruit:zero_file_id = yes
    fruit:nfs_aces = no

[homes]
    comment = Home Directories
    browseable = no
    writable = yes
    create mask = 0600
    directory mask = 0700
    valid users = %S

{% for share in cx_samba_shares %}
[{{ share.name }}]
    comment = {{ share.comment|default(share.name) }}
    path = {{ share.path }}
    browsable = {{ share.browsable }}
    writable = {{ share.writable }}
    create mask = {{ share.create_mask }}
    directory mask = {{ share.directory_mask }}
{% endfor %}
