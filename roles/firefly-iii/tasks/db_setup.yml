- name: Create database
  mysql_db:
    name: firefly
    state: present

- name: Generate new password for MySQL firefly user
  command: "echo {{ lookup('password', '/dev/null length=64') }}"
  changed_when: no
  register: mysql_firefly_password
- name: Create MySQL firefly user
  mysql_user:
    name: firefly
    host: localhost
    password: "{{ mysql_firefly_password.stdout }}"
    priv:
      'firefly.*': 'ALL'
    state: present
