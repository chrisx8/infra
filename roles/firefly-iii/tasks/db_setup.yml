- name: Create database
  mysql_db:
    name: firefly
    state: present

- name: Generate new password for MySQL firefly user
  set_fact:
    mysql_firefly_password: "{{ lookup('password', '/dev/null length=64') }}"
  changed_when: no
- name: Create MySQL firefly user
  no_log: true
  mysql_user:
    name: firefly
    host: localhost
    password: "{{ mysql_firefly_password }}"
    priv: 'firefly.*:ALL'
    state: present
