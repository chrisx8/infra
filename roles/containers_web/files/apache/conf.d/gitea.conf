<VirtualHost *:443>
	ServerName gitea.chrisx.xyz

	SSLEngine on
	SSLCertificateFile /etc/apache2/ssl/chrisx.xyz/fullchain.pem
	SSLCertificateKeyFile /etc/apache2/ssl/chrisx.xyz/privkey.pem

	Header always set Referrer-Policy "no-referrer"
	Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
	Header always set X-Content-Type-Options "nosniff"
	Header always set X-Robots-Tag "none"
	Header always set X-XSS-Protection "1; mode=block"

	AllowEncodedSlashes NoDecode

	ProxyPass /robots.txt !
	ProxyPass / http://127.0.0.1:3000/
	ProxyPassReverse / http://127.0.0.1:3000/
	ProxyPreserveHost On
	ProxyRequests off
	RequestHeader set X-Forwarded-Proto expr=%{REQUEST_SCHEME}

	ErrorLog /var/log/apache2/gitea_error.log
	CustomLog /var/log/apache2/gitea_access.log combined
</VirtualHost>
