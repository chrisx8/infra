<VirtualHost *:443>
	ServerName sso.chrisx.xyz

	SSLEngine on
	SSLCertificateFile /etc/apache2/ssl/chrisx.xyz/fullchain.pem
	SSLCertificateKeyFile /etc/apache2/ssl/chrisx.xyz/privkey.pem

	Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"

	AliasMatch "^/resources/.+/login/keycloak/img/favicon.ico$" /var/www/html/favicon.ico
	RedirectMatch 404 "^/$"

	ProxyPassMatch "^/$" !
	ProxyPassMatch "^/resources/.+/login/keycloak/img/favicon.ico$" !
	ProxyPass / http://127.0.0.1:8080/
	ProxyPassReverse / http://127.0.0.1:8080/
	ProxyPreserveHost On
	RequestHeader set X-Forwarded-Proto expr=%{REQUEST_SCHEME}

	ErrorLog /var/log/apache2/sso_error.log
	CustomLog /var/log/apache2/sso_access.log combined
</VirtualHost>
