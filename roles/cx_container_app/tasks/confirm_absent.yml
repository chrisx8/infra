---
- name: Set prompt string
  ansible.builtin.set_fact:
    # noqa: var-naming[no-role-prefix]
    _confirm_expected: CONFIRM {{ ansible_play_hosts | length }}

- name: Confirm removal
  register: _confirm # noqa: var-naming[no-role-prefix]
  ansible.builtin.pause:
    prompt: |-
      Are you sure you want to remove {{ ansible_play_hosts | length }} app(s)?
      This will also delete the DATABASE AND ALL VOLUMES (if applicable)!
      Type "{{ _confirm_expected }}" to continue

- name: Fail if not confirmed
  when: _confirm.user_input != _confirm_expected
  ansible.builtin.fail:
    msg: TASK NOT CONFIRMED
