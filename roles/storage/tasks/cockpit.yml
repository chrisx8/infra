- name: Get 45Drives repo key
  get_url:
    url: https://repo.45drives.com/key/gpg.asc
    dest: /etc/apt/trusted.gpg.d/45drives.asc
    mode: 0644
- name: Add 45Drives repo
  apt_repository:
    repo: deb https://repo.45drives.com/debian focal main
    state: present

- name: Install Cockpit
  apt:
    name: cockpit
    state: present
    install-recommends: false
- name: Install Cockpit modules
  apt:
    name: [cockpit-storaged, cockpit-file-sharing]
    state: present

- name: Enable Cockpit socket
  systemd:
    name: cockpit.socket
    enabled: true
    state: started
