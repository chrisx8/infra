- name: Remove default user account (ubuntu) 1/3
  user:
    name: ubuntu
    state: absent
    remove: yes
- name: Remove default user account (debian) 2/3
  user:
    name: debian
    state: absent
    remove: yes
- name: Remove default user account (admin) 3/3
  user:
    name: admin
    state: absent
    remove: yes

- name: Remove Ubuntu motd config 1/3
  when: ansible_distribution == 'Ubuntu'
  file:
    path: /etc/update-motd.d/10-help-text
    state: absent
- name: Remove Ubuntu motd config 2/3
  when: ansible_distribution == 'Ubuntu'
  file:
    path: /etc/update-motd.d/50-motd-news
    state: absent
- name: Remove Ubuntu motd config 3/3
  when: ansible_distribution == 'Ubuntu'
  file:
    path: /etc/update-motd.d/51-cloudguest
    state: absent
- name: Remove Ubuntu motd package
  when: ansible_distribution == 'Ubuntu'
  apt:
    name: motd-news-config
    state: absent
    purge: yes

- name: Remove garbage packages
  apt:
    name: [joe, python, python-minimal, snapd, accountsservice, command-not-found, fwupd, lxcfs, 
           open-iscsi, open-vm-tools, os-prober, packagekit, plymouth, postfix, 
           software-properties-common, ssh-import-id, sosreport, telnet, ufw]
    state: absent
    autoremove: yes
    purge: yes
