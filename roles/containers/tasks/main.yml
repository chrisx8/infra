- name: Set up acme.sh
  when: acme_email is defined and acme_email
  import_tasks: acme.yml
- name: Install Docker
  import_tasks: install_docker.yml

- name: Check if postgres_init.sql exists
  stat:
    path: ~/containers/postgres_init.sql
  register: postgres_check
- name: Prep containers
  when: not postgres_check.stat.exists
  import_tasks: prep_containers.yml

- name: Launch containers
  import_tasks: launch_containers.yml

- name: Install logrotate config for Nginx
  copy:
    src: logrotate/nginx-docker
    dest: /etc/logrotate.d/
    mode: 0644
