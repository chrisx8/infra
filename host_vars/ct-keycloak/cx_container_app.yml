---
ansible_host: s-elt800g2.arb.chrisx.xyz

cx_container_app_postgres_db: keycloak

cx_container_app_spec:
  name: keycloak
  image: quay.io/keycloak/keycloak:23.0
  command: start
  network: "{{ cx_container_app_network }}"
  env:
    KC_DB: postgres
    KC_DB_URL: jdbc:postgresql://host.containers.internal:5432/{{ cx_container_app_postgres_db }}?ssl=false
    KC_DB_USERNAME: "{{ cx_container_app_postgres_db }}"
    KC_DB_PASSWORD: "{{ _postgres_password }}"
    KC_FEATURES_DISABLED: authorization,ciba,client-policies,kerberos,par
    KC_HOSTNAME: sso.chrisx.xyz
    KC_HOSTNAME_STRICT_BACKCHANNEL: "true"
    KC_PROXY: edge
