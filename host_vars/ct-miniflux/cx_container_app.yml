---
ansible_host: s-elt800g2.arb.chrisx.xyz

cx_container_app_postgres_db: miniflux

# Miniflux: HTTP on 127.0.0.1:8081
cx_container_app_spec:
  name: miniflux
  image: docker.io/miniflux/miniflux:latest
  network: host
  env:
    BASE_URL: https://miniflux.arb.chrisx.xyz
    # yamllint disable-line rule:line-length
    DATABASE_URL: postgres://{{ cx_container_app_postgres_db }}:{{ _postgres_password }}@127.0.0.1:5432/{{ cx_container_app_postgres_db }}?sslmode=disable
    DISABLE_HSTS: "1"
    CLEANUP_REMOVE_SESSIONS_DAYS: "7"
    LISTEN_ADDR: 127.0.0.1:8081
    LOG_DATE_TIME: "1"
    RUN_MIGRATIONS: "1"
    OAUTH2_PROVIDER: oidc
    OAUTH2_OIDC_DISCOVERY_ENDPOINT: https://sso.chrisx.xyz/realms/master
    OAUTH2_REDIRECT_URL: https://miniflux.arb.chrisx.xyz/oauth2/oidc/callback
    OAUTH2_USER_CREATION: "1"
    OAUTH2_CLIENT_ID: "{{ _miniflux_oidc_client_id }}"
    OAUTH2_CLIENT_SECRET: "{{ _miniflux_oidc_client_secret }}"
